# Lullabeeアプリ ストアリリースまでの詳細計画

## 現在の状況
- **アプリの目的**: 子供との大切な会話を録音して家族で共有するアプリ
- **技術スタック**: Flutter + Firebase (Authentication, Firestore, Storage)
- **実装済み機能**: 認証、家族グループ、基本的な録音機能、オーディオ再生
- **主な課題**: 録音UIが未完成、COPPA対応、ストア要件の一部未対応

## フェーズ1: MVP開発（10週間）

### Week 1-2: 録音機能の完成
**実装内容**:
- 録音画面のUI/UX改善（タイマー、波形表示、一時停止機能）
- 録音後の投稿画面の実装（タイトル、説明、子供選択）
- エラーハンドリングとオフライン対応

**技術要件**: 
- `record`パッケージの高度な機能活用
- カスタムペインター for 波形表示
- ローカルストレージ（`path_provider`）

### Week 3-4: コンプライアンス対応
**実装内容**:
- 利用規約・プライバシーポリシー画面
- アカウント削除機能
- データエクスポート機能
- COPPA対応（保護者同意フロー）

**技術要件**:
- 年齢確認ゲート実装
- PDFエクスポート（`pdf`パッケージ）
- Firebaseデータ削除バッチ処理

### Week 5-6: 基本機能の改善
**実装内容**:
- 設定画面（プロフィール、通知、音質設定）
- オーディオプレーヤーの機能拡張
- 家族招待システムの完成

**技術要件**:
- Dynamic Links for 招待
- `shared_preferences`で設定保存
- バックグラウンド再生対応

### Week 7-8: セキュリティ強化
**実装内容**:
- Firebase Security Rulesの強化
- データ暗号化
- アクセス制御実装

**技術要件**:
- Cloud Functionsでのバリデーション
- 暗号化ライブラリ導入

### Week 9-10: リリース準備
**実装内容**:
- バグ修正とパフォーマンス最適化
- ストアアセット作成（スクリーンショット、説明文）
- テスト（単体、統合、E2E）

**技術要件**:
- Flutter Testフレームワーク
- TestFlightとGoogle Play Console設定

## フェーズ2: ストア申請準備（2週間）

### 必要な準備物
1. **法的文書**
   - プライバシーポリシー（日本語・英語）
   - 利用規約
   - COPPA準拠文書

2. **技術要件**
   - Production署名設定（iOS/Android）
   - API Level 34対応確認
   - iOS 18 SDK対応

3. **アセット**
   - アイコン（1024x1024、512x512）
   - スクリーンショット（各デバイス）
   - プロモーション動画（オプション）

## フェーズ3: ポストローンチ機能（v1.1以降）

### 優先度高
- プッシュ通知
- 検索・フィルタリング機能
- 録音のカテゴリー分け

### 優先度中
- 音声文字起こし機能
- 外部共有機能
- プレミアム機能（Adapty活用）

## 必要なリソース・スキル

### 開発スキル
- Flutter/Dart（上級）
- Firebase（Firestore, Functions, Storage）
- ネイティブ開発基礎（iOS/Android）
- UI/UXデザイン

### 追加で必要な可能性があるもの
- デザイナー（アセット作成）
- 法務アドバイザー（COPPA対応）
- QAエンジニア（テスト）
- マーケティング（ASO対策）

## 予想されるリスクと対策

1. **COPPA違反リスク**
   - 対策: 専門家によるレビュー、段階的なリリース

2. **ストア審査却下**
   - 対策: ガイドライン熟読、事前のTestFlight配布

3. **技術的負債**
   - 対策: リファクタリング時間の確保、コードレビュー

## 成功指標
- ストア審査通過
- クラッシュフリー率 99.5%以上
- ユーザーレビュー 4.0以上
- 家族グループ作成率 60%以上

---

*この計画は2025年6月13日に作成されました。*